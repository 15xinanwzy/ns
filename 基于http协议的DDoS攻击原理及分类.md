## 基于http的DDOS攻击的原理 ##



* **前言**

     <pre>
       基于应用层协议的DDoS攻击，是一类利用了TCP/IP协议栈高层协议的漏洞发起的攻击。相对于底层协议而言，
高层的协议具有多样性和复杂性等特征，同时由于高层协议的应用离不开底层协议的支持，所以基于高层协议的
DDoS攻击的底层特征协议完全正常，传统的基于底层协议特征的检测方法将不再适用，这使得基于应用层的DDoS
攻击的破坏力远大于传统网络层的DDoS攻击
     </pre>

* **HTTP-Flood攻击原理及分类**
	* 原理：
		* 定义 : 
			*  基于http的ddos攻击也叫做基于http的flood攻击。HTTP-Flood攻击是对基于应用层HTTP协议的所有DDoS攻击的总称，即是针对osi协议的第7层协议发起的攻击，是一种典型的应用层DDoS攻击，攻击的主要目标是Web服务器上的网页。 
		* 过程 : 

			*  攻击发生时，攻击者利用看似合法的HTTP GET或POST请求来攻击Web服务器或应用程序。通常使用僵尸网络“僵尸军队”，攻击者向服务器大量的高频请求一个或多个网页，使服务器忙于向攻击者提供资源而无法响应其他合法用户的服务请求
			*  攻击过程中单个请求如下图所示，但是当海量的单个请求同时发生时，HTTP-Flood攻击随之产生，造成的后果就是Web服务器拒绝服务
			
			 ![](http_session.png)
	* 分类：
	     
           http-flood 攻击一般分以下两类：

		* **请求泛洪攻击（HTTP Get Flood）** 
			*  这种攻击的形式是通过大量合法的HTTP请求，占用目标网络的带宽或者消耗服务器的资源，使正常用户无法进行Web访问。
			
			*  其特点就是攻击速度快，攻击发起节点多，但是每一次攻击带来的危害有限。攻击的内容可以随机生成也可以通过拦截用户正常的HTTP请求序列，然后重放产生 
		* **高消耗请求攻击** 

			*  这种攻击的形式就是攻击者不断访问Web服务器上高耗资源的网页，比如：数据库查询，密码验证等。带来的直接后果就是服务器的资源（CPU，内存，磁盘）被消耗殆尽，从而达到拒绝服务的效果
			
			*  这种攻击的特征是攻击速率低，攻击发起节点少，但每次攻击产生的危害却很大，并且不容易被检测工具发现。
			

        根据攻击采用的代理端不同，HTTP-Flood 又可分为两种
     * 使用代理服务器作为代理端，攻击者只需要提前收集互联网上的代理服务器的IP地址和代理端口，然后开多线程向这些代理端发送攻击数据包，代理服务器会自动把攻击数据包转发到目标主机上，目前互联网上的CC攻击就是采用的这种方式
     

     * 利用“僵尸网络”进行攻击，这时的代理端就是被黑客获取控制权的“僵尸主机”，并且这种攻击的代理端数量巨大。以下便是僵尸网络发动HTTP-Flood攻击时的网络拓扑示意图
		
			 ![](ghost.png)	
			
 在上图中，攻击者是攻击的主控台，向主控端发送攻击命令，控制整个过程。攻击者是主控端的通信一般不包括在DDoS工具中，可以通过多种连接方法完成，最常用的有 telnet TCP 终端会话，也可以是绑定到TCP 端口的远程shell，基于UDP 的客户/服务器远程shell等。

主控端和代理端都是攻击者非法侵入并控制的主机，分为两个层次，分贝运行非法植入的不同的攻击程序。每个主控端控制多个代理端，有其控制的代理端的地址列表，它监听端口接受共接着发来的命令后，将命令转发给代理端，主控端与代理端的通信根据DDoS工具的不同而有所不同。我们通常把主控端和代理端总称为“僵尸网络”。
