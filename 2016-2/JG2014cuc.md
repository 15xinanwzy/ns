# DNS域传送漏洞及DNS信息收集实例讲解

### 域名是zonetransfer.me和两个名称服务器nsztm1.digi.ninja和nsztm2.digi.ninja



### 实验名词解释


     SOA record:

### 概要

域名系统 (DNS) 区域中的任何文件中的第一个资源记录应起始授权机构 (SOA) 资源记录。SOA 资源记录表明该 DNS 名称服务器是此 DNS 域内的数据信息的最佳来源。

### SOA记录

SOA 资源记录包含以下信息︰

1.源主机-在其中创建文件的主机。

2.电子邮件-负责管理域的区域文件的人的电子邮件地址，请与联系。请注意，"."而不是使用"@"中的电子邮件名称。



3.序列号 – 此区域文件的修订号。每次更改区域文件时，增加这个数字。很重要，以便所做的更改将分发给任何辅 DNS 服务器进行更改时，每次增加这个值。



4.刷新时间-的时间，以秒为单位，查询要检查更改的主 DNS 服务器的 SOA 记录之前等待的辅助 DNS 服务器。当刷新时间到期时，辅助 DNS 服务器将请求从主当前 SOA 记录的副本。主 DNS 服务器符合此请求。

5.辅助 DNS 服务器比较主 DNS 服务器的当前 SOA 记录的序列号和其自己的 SOA 记录中的序列号。如果它们不同，则辅助 DNS 服务器将从主 DNS 服务器请求区域传送。默认值为 3600。



6.重试时间-的时间，以秒为单位，辅助服务器等待重试失败的区域传送。通常情况下，重试时间小于刷新时间。默认值为 600。



7.过期时间的时间，以秒为单位，不断尝试完成区域传送的辅助服务器。如果此时间到期之前成功的区域传送，辅助服务器将过期它的区域文件。这意味着次镜像将停止应答查询，因为它认为它太旧，无法进行可靠的数据。默认值为 86400。

8.最小 TTL-最小生存时间值适用于区域文件中的所有资源记录中。通知其他服务器多长时间他们应在缓存中保留数据的查询响应中提供此值。默认值为 3600。

下面是一个 Microsoft DNS 服务器生成默认 SOA 资源记录的示例︰

@   IN  SOA     nameserver.place.dom.  postmaster.place.dom. (

                               1            ; serial number

                               3600         ; refresh   [1h]

                               600          ; retry     [10m]

                               86400        ; expire    [1d]

                               3600 )       ; min TTL   [1h]



括号将允许换行到多行的 SOA 记录。

在上面的示例︰

源主机 = nameserver.place.dom。

联系人的电子邮件 = postmaster.place.dom。  

来源：https://support.microsoft.com/zh-cn/kb/163971

}


{

    MX records：mail exchanger record 邮件交换记录。用于将以该域名为结尾的电子邮件指向对应的邮件服务器以进行处理

      来源：https://help.dreamhost.com/hc/en-us/articles/215032408-What-is-an-MX-record-
### MX记录
1.MX记录是由两部分组成：优先权和域名。

2.前面的数字为优先权

3.越低的数字意味着一个更高的优先级。

4.ASPMX.L.GOOGLE.COM是它连接的邮件服务器

5.发送邮件服务器连接到MX服务器的优先顺序由优先级决定

6.如果两个服务器有相同的优先级，它随机选择一个。（这实际上是负载平衡了连接。）

    PTR record：PTR记录是邮件服务器通常需要。每一个邮件服务器有自己的DNS记录，它指向一个IP地址，但并不是所有的IP地址反向PTR记录。
如果你没有PTR记录，可能是您的邮件将被拒绝从其他邮件服务器。通常你不能自己创建PTR记录，因为你不是一个拥有IP地址，只是域名。
但是可以问服务提供商创建PTR记录

最好的办法就是做一个反向的DNS PTR记录相同的DNS主机邮件服务器记录。请向下滚动页面看到一些例子如何检查DNS PTR记录手动。

你可以使用此页检查PTR记录。您的邮件服务器将被自动检测到。这个工具将不检查单个IP地址的PTR记录。要做到这一，请使用此网页。 来源：http://www.ptrrecord.net/

### SRV记录
   SRV记录是一个服务记录，它是用来显示协议识别服务、主机和端口上运行它。这是经常使用的VoIP设置显示SIP服务器的位置，但可用于任何类型的服务。

SRV记录可以显示一些什么服务目标的公司正在运行的非常有用的信息

SRV 记录：一般是为Microsoft的活动目录设置时的应用。DNS可以独立于活动目录，但是活动目录必须有DNS的帮助才能工作。

为了活动目录能够正常的工作，DNS服务器必须支持服务定位（SRV）资源记录，资源记录把服务名字映射为提供服务的服务器名字。活动目录客户和域控制器使用SRV资源记录决定域控制器的IP地址。

_sip._tcp.zonetransfer.me -  服务的名称，包括协议和TCP / UDP的名字，在这里它是运行在TCP协议

}



{

   TXT记录的文本信息和应该检查的有价值的信息。第一个泄露了一个与系统管理有关的人的电话号码和电子邮件地址。

第二个显示该网站已被验证在谷歌应用程序帐户中使用。

三号是一个方式，GoDaddy以检查申请一个SSL证书拥有域名，这种信息可能是有用的如果它泄漏服务正在使用或联系信息

}



{

SRV 记录：一般是为Microsoft的活动目录设置时的应用。DNS可以独立于活动目录，但是活动目录必须有DNS的帮助才能工作。

为了活动目录能够正常的工作，DNS服务器必须支持服务定位（SRV）资源记录，资源记录把服务名字映射为提供服务的服务器名字。活动目录客户和域控制器使用SRV资源记录决定域控制器的IP地址。

_sip._tcp.zonetransfer.me -  服务的名称，包括协议和TCP / UDP的名字，在这里它是运行在TCP协议



## 实验步骤：



在linux中进行实验操作，输入dig axfr @nsztm1.digi.ninja zonetransfer.me

输入命令得到soa记录：dig nsztml.digi.nninja zonetransfer.me SOA +noall +answer （截图在ppt里面）

此条目显示有关主名称服务器的信息、管理员的联系方式和其他关键信息，这是它如何分解的信息：


     nsztm1.digi.ninja.  源主机

robin.digi.ninja. 电子邮件-负责管理域的区域文件的人的电子邮件地址，请与联系。请注意，"."而不是使用"@"中的电子邮件名称。

    2014101601   
此区域文件的修订号。每次更改区域文件时，增加这个数字。增加这个值是每一次的变化是重要的，这样的变化将分发到任何辅助DNS服务器。

    172800  
二级名称服务器应在请求更改请求之间等待的时间

    900 
重试时间 如果它未能正确刷新，则主名称服务器应等待重试时间（秒）

    1209600  
过期时间 Expire time

    3600 
最小生存时间。

负责人领域提供了一个电子邮件地址，可作为其他攻击的一部分，
并从目前的序列号，如果它是基于日期和定期检查，它的改变可能表明该公司的一些活动。



    zonetransfer.me.        7200    IN      NS      nsztm1.digi.ninja.

    zonetransfer.me.        7200    IN      NS      nsztm2.digi.ninja.





MX记录：
       dig nsztml.digi.nninja zonetransfer.me MX +noall +answer

       zonetransfer.me.	7200	IN	MX	0 ASPMX.L.GOOGLE.COM.

       zonetransfer.me.	7200	IN	MX	10 ALT1.ASPMX.L.GOOGLE.COM.

       zonetransfer.me.	7200	IN	MX	10 ALT2.ASPMX.L.GOOGLE.COM.

       zonetransfer.me.	7200	IN	MX	20 ASPMX2.GOOGLEMAIL.COM.

       zonetransfer.me.	7200	IN	MX	20 ASPMX3.GOOGLEMAIL.COM.

       zonetransfer.me.	7200	IN	MX	20 ASPMX4.GOOGLEMAIL.COM.

       zonetransfer.me.	7200	IN	MX	20 ASPMX5.GOOGLEMAIL.COM.

MX记录表明在邮件要发送，这些都是标准的邮件服务器，谷歌表示该公司使用Gmail和谷歌应用程序来处理他们的电子邮件。



     dr.zonetransfer.me.	300	IN	LOC	53 20 56.557 N 1 38 33.525 W 0.00m 1m 10000m 10m

LOC是短暂的位置，可以用来记录一个纬度/经度值。值被存储在度/分钟/秒，



     onetransfer.me.	301	IN	TXT	"Remember to call or email Pippa on +44 123 4567890 or pippa@zonetransfer.me when making DNS changes"

     zonetransfer.me.	301	IN	TXT	"google-site-verification=tyP28J7JAUHA9fw2sHXMgcCC0I6XBmmoVi04VlMewxA"

     dzc.zonetransfer.me.	7200	IN	TXT	"AbCdEfG"

     info.zonetransfer.me.	7200	IN	TXT	"ZoneTransfer.me service provided by Robin Wood - robin@digininja.org. See www.digininja.org/blog/zonetransferme.php for more information

TXT记录的文本信息和应该检查的有价值的信息。第一个泄露了一个与系统管理有关的人的电话号码和电子邮件地址。

第二个显示该网站已被验证在谷歌应用程序帐户中使用。

三，GoDaddy以检查申请一个SSL证书拥有域名，这种信息可能是有用的如果它泄漏服务正在使用或联系信息



     testing.zonetransfer.me. 301	IN	CNAME	www.zonetransfer.me.

     staging.zonetransfer.me. 7200	IN	CNAME	www.sydneyoperahouse.com.

公司有一个测试网站，它位于同一个服务器上的主要网站。

测试网站往往是不太安全的比主要网站，所以是一个更好的攻击向量。



     164.180.147.217.in-addr.arpa.zonetransfer.me. 7200 IN PTR www.zonetransfer.me.



     _sip._tcp.zonetransfer.me. 14000 IN	SRV	0 0 5060 www.zonetransfer.me.

SRV记录是一个服务记录，它是用来显示协议识别服务、主机和端口上运行它。这是经常使用的VoIP设置显示SIP服务器的位置，但可用于任何类型的服务。

SRV记录可以显示一些什么服务目标的公司正在运行的非常有用的信息

    _sip._tcp.zonetransfer.me - 
 服务的名称，包括协议和TCP / UDP的名字，在这里它是运行在TCP协议

14000 IN SRV   标准的TTL，DNS值，DNS和类型 

0 服务的优先级，如果有多个服务，这表明先尝试

0 重量，当两个服务有相同的优先级，这表明这是首选

5060 服务正在监听的端口

       www.zonetransfer.me. 
主机提供服务



     zonetransfer.me.	7200	IN	A	217.147.177.157

     www.zonetransfer.me.	7200	IN	A	217.147.177.157

     vpn.zonetransfer.me.	4000	IN	A	174.36.59.154

     owa.zonetransfer.me.	7200	IN	A	207.46.197.32

     office.zonetransfer.me.	7200	IN	A	4.23.39.254

     canberra_office.zonetransfer.me. 7200 IN A	202.14.81.230

    dc_office.zonetransfer.me. 7200	IN	A	143.228.181.132



个记录是DNS记录的主要类型，常常把大多数的记录，他们的名字到IP地址的映射。









# 课程大作业

## IANA与互联网？ 

### o域名管理机制

### oIP地址管理机制

### o协议管理机制

### o中文域名如何注册和解析？



##### IANA：(The Internet Assigned Numbers Authority，互联网数字分配机构)是负责协调一些使Internet正常运作的机构。同时，由于Internet已经成为一个全球范围的不受集权控制的全球网络，为了使网络在全球范围内协调，存在对互联网一些关键的部分达成技术共识的需要，而这就是IANA的任务。


#### 简介：

IANA是全球最早的Internet机构之一，其历史可以追溯到1970年。今天，IANA被负责协调IANA责任范围的非营利机构ICANN(Internet Corporation for Assigned Names and Numbers，互联网名称与数字地址分配机构)掌管，ICANN行使IANA的职能。

IANA分配和维护在互联网技术标准（或者称为协议）中的唯一编码和数值系统。

IANA的所有任务可以大致分为三个类型：

#### 一、域名。IANA管理DNS域名根和.int，.arpa域名以及IDN（国际化域名）资源。

#### 二、数字资源。IANA协调全球IP和AS（自治系统）号并将它们提供给各区域Internet注册机构。 

#### 三、协议分配。IANA与各标准化组织一同管理协议编号系统。



#### 职能：

在IANA之下另有3个分支机构分别负责欧洲、亚太地区、美国与其他地区的IP地址资源分配与管理。这3个机构是： RIPE（即设在比利时的Réseaux IP Européens)，负责整个欧洲地区的IP地址资源分配与管理； 

APNIC（即设在澳大利亚的Asia Pacific Network Information Center），负责亚洲与太平洋地区的IP地址资源分配与管理；

ARIN（即设在美国的American Registry for Internet Numbers) ，负责美国与其他地区的IP地址资源分配与管理。另外，许多国家和地区都成立了自己的域名系统管理机构，负责从前述3个机构获取IP地址资源后在本国或本地区的分配与管理事务。

这些国家和地区的域名系统管理机构大多属于半官方或准官方机构。但在实际运作过程中，相关国家或地区的政府至少在业务上对其不加干预，使其成为前述3个机构之一在各该国家或地区的附属机构。如日本的JPNIC和中国的CNNIC均属此种机构。



顶级域名信息数据库

## 域名管理
一丶IANA是INTERNET域名系统的最高权威机构，掌握着INTERNET域名系统的设计、维护及地址资源分配等方面的绝对权力。IANA管理数据的根域名服务器，根域名服务器在分层的域名系统（DNS）树的顶部。这项任务涉及与顶级域名运营商，根域名服务器运营商和ICANN官方的制造设备。 

二丶IANA可以查询全球各类顶级域名的具体信息，无论知名还是不知名的域名后缀，都可以找到它的详细信息以及管理机构所在国家、地址信息、运营公司、注册局网址等。

数据库总网址

AfriNIC非洲地区

APNIC亚太地区

ARIN 北美地区

LACNIC 拉丁美洲和一些加勒比群岛

RIPE NCC 欧洲、中东和中亚


## IP地址管理

### 1.丶IANA 是Internet号分配的机构。负责对IP地址分配规划以及对TCP/UDP公共服务的端口定义。IANA是在国际互联网中使用的IP 地址、域名和许多其它参数的管理机构。IP地址、自治系统成员以及许多顶级和二级域名分配的日常职责由国际互联网注册中心（IR）和地区注册中心承担。


### 2丶IANA保留地址

IANA保留地址是国际互联网代理成员管理局（IANA）在IP地址范围内，将一部分地址保留作为私人IP地址空间或者专门用于内部局域网等特殊用途使用的地址。

类IP范围网络数

A 10.0.0.0---10.255.255.255(长度相当于1个A类IP地址)
B 172.16.0.0---172.31.255.255(长度相当于16个连续的B类IP地址)
C 192.168.0.0---192.168.255.255(长度相当于256个连续的C类IP地址)

以上地址是不会被Internet分配的，它们在Internet上也从来不会被路由，虽然它们不能直接和Internet连接，但仍旧可以被用来和Internet通讯，我们可以根据需要来选用适当的地址类，在内部局域网中大胆地将这些地址当作公用IP地址一样地使用。在Internet上，那些不需要与Internet通讯的设备，如打印机、可管理集线器等也可以使用这些地址，以节省IP地址资源。

### ip地址分类


在IP地址3种主要类型里，各保留了3个区域作为私有地址，其地址范围如下： 

A类地址：10.0.0.0～10.255.255.255 

B类地址：172.16.0.0～172.31.255.255 

C类地址：192.168.0.0～192.168.255.255
A类地址的第一组数字为1～126。注意，数字0和 127不作为A类地址，数字127保留给内部回送函数，而数字0则表示该地址是本地宿主机，不能传送。

B类地址的第一组数字为128～191。

C类地址的第一组数字为192～223。


*  A类地址

  一个A类IP地址由1字节的网络地址和3字节主机地址组成，网络地址的最高位必须是“0”， 地址范围从1.0.0.0 到126.0.0.0。可用的A类网络有126个，每个网络能容纳1亿多个主机。 

  A类地址的表示范围为：0.0.0.0~126.255.255.255，默认网络掩码为：255.0.0.0；A类地址分配给规模特别大的网络使用。A类网络用第一组数字表示网络本身的地址，后面三组数字作为连接于网络上的主机的地址。分配给具有大量主机（直接个人用户）而局域网络个数较少的大型网络。例如IBM公司的网络。

* B类地址


一个B类IP地址由2个字节的网络地址和2个字节的主机地址组成，网络地址的最高位必须是“10”，地址范围从128.0.0.0到191.255.255.255。可用的B类网络有16382个，每个网络能容纳6万多个主机 。

类地址的表示范围为：128.0.0.0~191.255.255.255，默认网络掩码为：255.255.0.0；B类地址分配给一般的中型网络。B类网络用第一、二组数字表示网络的地址，后面两组数字代表网络上的主机地址。

* C类地址

一个C类IP地址由3字节的网络地址和1字节的主机地址组成，网络地址的最高位必须是“110”。范围从192.0.0.0到223.255.255.255。C类网络可达209万余个，每个网络能容纳254个主机。 

  C类地址的表示范围为：192.0.0.0~223.255.255.255，默认网络掩码为：255.255.255.0；C类地址分配给小型网络，如一般的局域网和校园网，它可连接的主机数量是最少的，采用把所属的用户分为若干的网段进行管理。C类网络用前三组数字表示网络的地址，最后一组数字作为网络上的主机地址。


* D类和E类地址

D类地址用于多点广播（Multicast）。 

D类IP地址第一个字节以“lll0”开始，它是一个专门保留的地址。它并不指向特定的网络，目前这一类地址被用在多点广播（Multicast）中。多点广播地址用来一次寻址一组计算机，它标识共享同一协议的一组计算机。 


以“llll0”开始，为将来使用保留。 

全零（“0．0．0．0”）地址对应于当前主机。全“1”的IP地址（“255．255．255．255”）是当前子网的广播地址。 


D类地址和E类地址两类地址用途比较特殊，D类地址称为广播地址，供特殊协议向选定的节点发送信息时用。E类地址保留给将来使用。


### 3丶特殊IP

一、0.0.0.0

它表示的是这样一个集合：所有不清楚的主机和目的网络。“不清楚”是指在本机的路由表里没有特定条目指明如何到达。对本机来说，。如果你在网络设置中设置了缺省网关，那么Windows系统会自动产生一个目的地址为0.0.0.0的缺省路由。

二、255.255.255.255

限制广播地址。对本机来说，这个地址指本网段内(同一广播域)的所有主机，这个地址不能被路由器转发。

三、127.0.0.1～127.255.255.254

本机地址，主要用于测试。也就是名Localhost。寻址这样一个地址，是不能把它发到网络接口的。除非出错，否则在传输介质上永远不应该出现目的地址为“127.0.0.1”的 数据包。

四、224.0.0.1

组播地址，从224.0.0.0到239.255.255.255都是这样的地址。224.0.0.1特指所有主机，224.0.0.2特指所有路由器。这样的地址多用于一些特定的程序以及多媒体程序。如果主机开启了IRDP (Internet路由发现协议，使用组播功能)功能，那么主机路由表中有这样一条路由。

五、169.254.x.x

如果主机使用了DHCP功能自动获得一个IP地址，那么当DHCP服务器发生故障，或响应时间太长而超出了一个系统规定的时间，Windows系统会分配这样一个地址。

六、10.x.x.x、172.16.x.x～172.31.x.x、192.168.x.x

私有地址，这些地址被大量用于企业内部网络中。一些宽带路由器，也往往使用192.168.1.1作为缺省地址。私有网络由于不与外部互连，因而可能使用随意的IP地址。保留这样的地址供其使用是为了避免以后接入公网时引起地址混乱。使用私有地址的私 有网络在接入Internet时，要使用地址翻译(NAT)，将私有地址翻译成公用合法地址。在Internet上，这类地址是不能出现的。




## 协议管理机制

IANA负责维护大量的包含网络的协议的代码，通过IETF（国际互联网工程任务组）负责提供服务。

许多协议使用标识符组成的常量和其他被人所熟知的值，即使在一个协议
被定义并且已经开始部署，也可能需要分配新的值（例如，一在DHCP选项类型，或一个新的加密或认证变换的IPSec）。确保此类数量具有一致性             所有实现的值和解释转让必须由中央主管机关管理。IETF协议，该部分由IANA提供。 

### Protocol Registries

Private Use：
仅用于私人或本地使用，目的由由本地站点进行定义 。不会试图去防止多站点使用相同的值，对于IANA审查来说这是不必要的。网站的责任是负责在私人的使用范围之内确保没有冲突发生。

Experimental Use：
和私人用途类似仅由本地使用，目的仅仅只是方便进行实验

Hierarchical Allocation ：
委派的管理者可以分配被被赋予了对命名空间的那部分的控制权的值，IANA控制高等级的命名空间根据其他的政策。
例如DNS名称，对象标识符，IP地址。

First Come First Served ：
对于先来先服务，除了确保它是良好的形成和不重复现有的任务没有实质性的审查要求。但是，请求必须包含少量的信息，比如联系点（包括电子邮件地址和简要说明值将如何使用。由命名空间所定义的特定类型的附加信息             要求也可能需要提供。对于数字，这些额外的值通常由IANA分配，包含名字，特殊的文本字符串通常也是要求提供的。例如SASL机制名称，LDAP协议机制，和LDAP语法。 

Expert Review ：
当定义注册表时需要由权威的审查所提供的文档和审查标准

RFC Required ：
RFC出版（无论是作为IETF RFC编辑提交或作为一个独立的提交）就足够了。除非另有规定，任何类型的RFC是足够的（例如，信息、实验、标准跟踪）。 

Standards Action ：
值由仅IESG所批准的RCFs监管标准所分配，例如BGP的消息类型的移动节点标识符的选择类型，DCCP Packet Types 。

IESG Approval：
新的任务可以由IESG批准。虽然没有要求，IESG有权请求文件或其他证明材料。          

 The following guidelines are suggested for any evaluation
under IESG Approval:

-IESG可以（也应该）拒绝如果注册另一个路径是可用的，是比较合适的，没有令人信服的理由来使用这条路径。

-在批准请求之前，应征询社会的意见，通过“征求意见”，提供尽可能多的是合理的要求信息。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
例如IPv4组播地址分配，IPv4 IGMP类型和代码值，移动IPv6报头类型和选项值。 

需要注意的是，对命名空间进行分区通常是有意义的。分成多个类别，每个类别内有项目不同的处理。例如，现在许多协议分区命名空间为两个（甚至更多）的部分，在一个范围是保留为私人或实验使用，而其他范围保留                                                                                                                                                                                                                                               在评审过程中分配的全球唯一任务。在不同的策略范围内将命名空间划分为不同的范围。


## 中文域名注册和解析


### 中文域名的构成：
采用树状分级结构，系统的根不被命名，其下一级称为“中文顶级域”（ＣＴＬＤ），顶级域一般由“地理域”组成，二级域为“类别／行业／市地域”，三级域为“名称／字号”，国标最主要特征是中文域名的结构符合中文语序。

     顶级域        二级域              三级域

   地理域    类别／行业／市地域    名称／字号

例如：

北京航空航天大学的中文域名是：北京．教育．北京航空航天大学，其中北京航空航天大学域下的子域名由其自行定义，例如，北京．教育．北京航空航天大学．经济管理学院ＭＢＡ

### 中文域名注册
中文域名系统第一阶段开通地理域限于中国及中国各行政区划；第一阶段开通的类别域限于政府、组织、新闻、企业、商标、网络。

中文域名系统第一阶段注册域名的申请者，限定于政府部门、独立法人和能够承担民事责任的组织。

注册程序: 申请者首先递交《中文域名申请表》和相关材料，其次中文域名承办单位对注册文件进行审核，中文域名承办单位通知中文域名注册是否成功。

http://www.people.com.cn/GB/it/49/149/20010214/395764.html

### 中文域名存在的问题

*  主要问题就是在于中文域名使用的是中文，因为中文域名使用的是汉字作为域名的组成，比如企鹅.com.如果不会使用中文，则不能正常方便的使用，本身中文的学习就有难度，缺乏通用性。英语是世界的通用语言，英文国际域名全世界通用，所以不存在使用上的障碍。
*  中文域名的价格普遍较高，而且在中文域名也非常的不方便，使用上和成本上也不合算
*  与域名解析的过程也有关系，直接输入中文浏览器是不能进行解析的，需要进行相应的插件安装和设置才能正常使用，这也是使用上的不方便



### 中文域名的解析

英文域名解析的过程：当应用过程需要将一个主机域名映射为IP地址时，就调用域名解析函数，解析函数将待转换的域名放在DNS请求中，以UDP报文方式发给本地域名服务器。本地的域名服务器查到域名后，将对应的IP地址放在应答报文中返回。同时域名服务器还必须具有连向其他服务器的信息以支持不能解析时的转发。若域名服务器不能回答该请求，则此域名服务器就暂成为DNS中的另一个客户，向根域名服务器发出请求解析，根域名服务器一定能找到下面的所有二级域名的域名服务器，这样以此类推，一直向下解析，直到查询到所请求的域名。

中文域名的解析的方法：

1.通过url转发设置到对应的国际域名网

先添加别名，再增加url转发即可完成设置。

只有[url]www.中文。cn[/url]这类有前缀的才能转发，不加www的域名
不能转发。

2.将中文域名解析到服务器（虚拟主机）上，然后在服务器（虚拟主机）上绑定中文域名转码后的字符串。在绑定域名的时候，填其转码
后的字符串。使用（punycode可以进行转码）

Punycode：Punycode是一个根据RFC 3492标准而制定的编码系统,主要用於把域名从地方语言所采用的Unicode编码转换成为可用於DNS系统的编码。
早期的DNS（Domain Name System）是只支持英文域名解析。在IDNs（国际化域名Internationalized Domain Names）推出以后，为了保证兼容以前的DNS，所以，对IDNs进行punycode转码，转码后的punycode就由26个字母+10个数字，还有“-”组成。中文域名的解析都需要转成punycode码，然后由DNS解析punycode码。

转码之后域名的解析过程和英文域名一样。

例如：

    企鹅.com，用Punycode转换后为：xn--hoq754q. com

    中国.cn，用Punycode转换后为：xn--fiqs8s. cn