## 点评智能手机指纹验证解锁
##### 指纹解锁实际上是以降低了手机安全性的方法提升了易用性。
### 一、对于原简单密码方式解锁的改进之处
+ 便利性：相比起输入数位密码，简单地按一下手指解锁更加方便，就像世界上没有两片相同的树叶，两个指纹相同的几率也非常之小，当指纹不被别人窃取的时候，指纹识别是安全又方便的。
+ 免记忆性：出于安全考虑，不同的设备可能设置不同的密码，很有可能记错或者记混，但如果用指纹解锁，就不需要记忆各种密码，只需要保证自己的指纹不被改变，当然改变指纹是很难的。
+ 编码与输入过程均不受用户认识水平影响： 只需要录入指纹，将手指放到相应位置即可解锁，无需任何复杂操作。
+ 作为一个习惯于指纹解锁的人，在完成这次作业之前认为指纹解锁是十分安全的，毕竟感觉现实中不会有人来窃取自己的指纹。而且方便又简单，相信大多数人相比输入6位或更多位密码更喜欢指纹解锁。在我认识的人当中也有把密码设置的十分简单比如0000的人存在。对于熟悉的人来说，猜出或者偷看到别人的密码比盗取他的指纹做了模具来解锁要简单的多。

### 二、对于原简单密码方式解锁的存在的问题
+  上文说到猜到或者看到熟人的密码很容易，而对于陌生人来说，猜出6位的密码，获取你的指纹或许更加容易。毕竟你的手机屏幕以及生活中触碰到的地方很可能就留有你的指纹，当你递出一杯水，甚至交上一份作业，你的指纹也随之交付给了别人，而猜出即使是6位的密码还需要经过复杂的计算和思考。
+  现在指纹解锁被大量应用于解锁手机、移动支付等。对于普通的简单密码解锁方式，这些密码必然不尽相同，但如果应用了指纹解锁，所有的密码都是一样的，毕竟指纹是唯一的。指纹被盗取之后，无论是解锁还是移动支付都只需要这个指纹来通过验证。许多的实验也证明了这一点。 
+ 指纹象征了一个人的身份，若指纹被别人盗取，后果则不可想象。密码被别人盗取了还可以修改，但指纹被盗取了却无法做出改变。
+ 当手是湿的的时候或者受伤将手指包扎起来了的时候，由于无法检测到指纹而无法用指纹解锁手机，但密码方式只在乎你输入的密码是否正确，与环境无关。
+ 相对于原始的简单密码，指纹解锁的响应速度比较慢。它先要采集用户用来解锁的指纹，生成图像并处理，然后再提取特征，最后才与已有的指纹库中的指纹进行比对，符合才解锁。而密码输入只用将输入的字符串与存储的字符串进行比对。且指纹库中往往不止一个指纹，还需要一个个遍历，密码则只有一串字符串。
	+ 家具上的指纹   
	<img src="https://github.com/Hiri3024/ns/blob/master/2016-2/Zxm/IMG_4235(20170107-181620).jpg" width="400" height="600" alt="家具上的指纹"/>
	+ 手机屏幕上的指纹   
	<img src="https://github.com/Hiri3024/ns/blob/master/2016-2/Zxm/IMG_4236(20170107-181538).jpg" width="400" height="600" alt="手机屏幕上的指纹"/>   

###三、针对不同智能手机的指纹验证解锁机制的攻击方法、案例
+ 指纹传感器监视攻击（针对Android）   
	2015年8月于拉斯维加斯举行的黑帽大会（Black Hat conference）上，来自 FireEye 的研究员 Yulong Zhang 和 Tao Wei介绍了一种“指纹传感器监视攻击”的方法，展示如何窃取用户在 Android 手机上保存的指纹信息：由于许多 Android 手机并没有完全锁死指纹传感器，通过远程遥控，黑客们可以窃取到用户存储在受影响的手机中的指纹图像。而如果你 Root 了你的 Android 手机，你的指纹被窃取的风险将会更大。  
	然而往往大多数人为了删掉手机中无用的初始软件都会选择root自己的手机，一些安全软件也会需求root权限，在让手机更加符合自己喜好的时候，也会将自己的手机置于更加危险的境地。  

	+ 指纹解锁有2种架构，Fingerprint without TrustZone和Fingerprint with TrustZone。在root情况下without TrustZone是非常危险的，所有的数据都可以轻松获取到。但是在有了TrustZone的情况下，hacker在获取了root以后依然无法读取TrustZone中的指纹信息。如果想要获取指纹信息，理论上还需要破解TrustZone才行。   
	<img src="https://github.com/Hiri3024/ns/blob/master/2016-2/Zxm/withoutTrustZone.png" width="600" height="330" alt="Fingerprint with TrustZone"/> 
	<img src="https://github.com/Hiri3024/ns/blob/master/2016-2/Zxm/withTrustZone.png" width="600" height="330" alt="Fingerprint with TrustZone"/> 
	+ confused attack（迷惑性攻击）  
		+ 采取迷惑性攻击，让用户以为是在解锁手机，但是其实却是通过了转账的指纹验证。以为是验证身份但是其实是在行使权力。   
		指纹解锁既可以解锁手机验证身份又可以通过移动支付的验证行使权力，但其实这种攻击方法与是否指纹解锁验证关系不大，只要解锁密码和支付密码一样，这种方式都可以使用。
	+ 不安全的数据存储  
		+ 最经典的例子就是HTC one的指纹保存文件，HTC直接将指纹图像配置文件放在了手机存储的“ /data/dbgraw.bmp?a=.jpg”路径下，并启用了‘world-readable’权限，这意味着任何应用程序都能够窃取用户的指纹，对所有人都是可读可写的。毫无安全性可言。而且，每使用一次指纹传感器，存储的这部分图像就会被刷新一次，因此恶意进程可以在不被发现的情况下多次盗取图片。   
		+ 不过当此次问题被提出后，HTC已经修复了这个问题。
		+ 相对的，苹果的指纹存储是较为安全的，并不会存储使用者的物理指纹图片，只会记录指纹关键点数据。在苹果官网5S的视频介绍中也说到：“所有的指纹信息都是加密的，并保存在全新A7芯片内置的Secure Enclave之中。在这里，信息被锁定于远离一切的位置，只有Touch ID传感器才能访问，而其他一切软件均无权接触。”。
		+ 一个指纹识别系统的基础，在于指纹是否被安全的存储，若是轻而易举的就可以被窃取，那么指纹识别解锁将毫无意义。就像是给房间上了一把极其复杂的锁，却将钥匙扔在门外。	
![](http://images0.cnblogs.com/blog2015/640760/201508/071841020028385.png)
![](http://images0.cnblogs.com/blog2015/640760/201508/071841189877229.png)
	+ finger spy  
		+  虽然TrustZone非常安全，但是android系统是通过应用层的service和TrustZone进行通讯的。因此hacker可以伪造一个finger print app，并且和finger print sensor进行通讯，从而窃取到用户的指纹。三星针对这个问题的解决方式是TrustZone UI。也就是当使用指纹进行授权的时候必须通过TrustZone UI来进行，因为TrustZone UI也是TrustZone的一部分，所以黑客必须要破解掉TrustZone才能获取到指纹。
		+  此案例说明，Android系统的手机，Fingerprint without TrustZone是十分危险的，一定要使用TrustZone，特别是root过的手机。
		 ![](http://images0.cnblogs.com/blog2015/640760/201508/071841402848057.png)
	+ fingerprint backdoor  
			用户在系统的设置中可以查看当前记录的指纹数量，但是这个数量信息并没有保存在TrustZone当中。因此hacker可以留下自己的指纹作为后门，并且将增加的指纹的数量减掉。比如说在demo中fingerprint service显示仅保存了一个指纹，但是demo中却成功的用三个指纹解锁了手机屏幕，因为其中两个指纹其实是黑客留下的，为了防止用户发现，黑客将保存的指纹数修改成了1。

		> 来源：http://www.cnblogs.com/k1two2/p/4711660.html
+ 用木胶制作假指纹（几乎所有指纹解锁都可以用这种方法攻击）
	+ 此类攻击方法十分朴实，但很好用且方便。并非技术层面而是物理攻击。工具只需要一小块硅橡胶或者木胶来制作指纹模型，只要获取到了指纹，便可以解锁。无论如何，一块玻璃板无法分辨按上来的指纹是真正的手指还是木胶压出来的指纹模具，就算有TrustZone也无可奈何。   	
	+ 三星Galaxy S5 Fingerprint Scanner 被骗过
		 http://v.youku.com/v_show/id_XNjk5NDQ2NDI4.html  
		+ 视频内容中，研究人员首先拍摄了手机屏幕上留下的指纹，然后用木胶制作出了假指纹。利用指纹模型来欺骗Galaxy S5的指纹传感器，进而控制手机。视频中还演示了同样使用指纹欺骗手段进入倍受全球亿万用户追捧的国际贸易支付工具PayPal的账号，甚至用其账号向其他账号转移资金，这是由于PayPal可以利用三星的指纹传感器取代密码。
	+ 此方法也可以用来破解iPhone的指纹密码。   
		+ 例1：http://v.youku.com/v_show/id_XNjEzMzUxNjY0.html。   
		+ 例2：
			+ 首先在纸上挤出一块膏状医用硅橡胶，随后用解锁手机的左手拇指紧紧按压。
			+ 暴露在空气中5分钟，硅橡胶便完全定型，整块硅橡胶上也留下了清晰的指纹印。
			+ 通过上面得到的指纹印被称为“阴面”，用它就可以不断复制与手指完全一致的“仿真拇指”,取用了一小块橡皮泥捏出拇指大小，印在硅胶上提取指纹，用“仿真拇指”放在iPhone的指纹识别处，经过一番摸索后，马上解开了手机锁。紧接着，记者也确认“仿真拇指”也能用于支付宝转账。
	 ![](http://img2.tgbusdata.cn/v2/thumb/jpg/RTc4RCw1ODAsMTAwLDQsMywxLC0xLDAscms1MCw2MS4xNTIuMjQyLjEx/u/iphone.tgbus.com/UploadFiles/201603/2016033010561595.gif)  
				> 来源：http://iphone.tgbus.com/tutorial/use/201603/20160330105451.shtml        
	    
	
	
## 四、总结
指纹解锁作为如今主流的手机解锁方式，必定是有利也有弊的。其好处在于方便，不需要记密码，也具有一定的安全性。但坏处在于安全性不如密码解锁高，若是有心，获取一个人的指纹是很容易的，且指纹解锁并不需要完整的指纹，只要提取出的特征与数据库中相符即可解锁。   

+ 建议关闭支付指纹验证，以防被盗取指纹后解锁了手机就相当于拿到支付宝密码。在iPhone设置中，更改Touch ID设置时，需要输入密码才可以进入界面，关闭指纹验证支付的话若没有掌握你的密码便无法使用支付宝或Apple Pay等转账。
+ 建议关闭锁定时允许访问siri、回复信息等功能，有不少案例演示了如何利用siri和回复信息绕过锁屏获取照片等信息。
+ 不要随意ROOT手机，特别是使用Fingerprint without TrustZone架构的。这样会使你手机储存的信息相当于暴露在光天化日之下。
+ 若不是追求安全性而是便捷 ，指纹解锁可以满足大部分要求，方便、快捷、看起来很高端。但若是追求较高的安全性，还是使用密码解锁较好，并且密码设置随机一点，不要用什么生日学号手机号之类的数字，也不要和支付密码设置相同。或者如果可以且不怕麻烦，设置指纹验证后输入密码。
