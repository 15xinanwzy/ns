# Captcha学习补充

> 本来是想对语音验证码进行介绍的，但是根据老师上次提的问题，我想从一个想对宏观的角度再介绍一下Captcha验证码的地位和应用。（其实是在探究的过程中，又看到许多想记下来的points，想补充总结一下[捂脸](●'◡'●)])

## 验证码的地位
在网络信息安全的五个功能中(身份认证、授权、保密性、完整性和不可否认)，身份认证是最基本最重要的环节。身份认证有三个要素:

* 所知：things only the user knows，比如密码，安保问题
* 所有：things only the user has，比如手机校验码，U盾
* 所是：things only the user is，比如指纹，瞳孔

从密码学角度上来说，使用上面两者完成的验证称之为双因素验证。生活中，大部分的身份认证是双因素认证，比如中传教务系统，需要输入账号，密码以及验证码。
那么我要学习探究的验证码也就属于其中第二要素：所有。它的存在提高了我们身份认证的安全性。

## 验证码的分类及应用
现在我们常见的验证码总体分为四类，按照四类验证码的产生顺序依次为标准验证码、创新验证码、无知识验证码，智能验证码。

### 第一代 标准验证码
  这一代验证码就是我们常见的图形验证码、语音验证码，基于机器难以处理复杂的计算机视觉及语音识别问题，而人类却可以轻松的识别来区分人类及机器。最开始的验证码由字母和数字组成，后来为了增加难度，出现了汉字验证码以及在图片基础上添加扭曲，变形，重叠，还有干涉线等

* 标准图形验证码
	  
	* 主要是通过用户输入图片中的字母、数字、汉字等进行验证。
	* 特点：简单，人机交互性较好，针对此类的破解已经非常成熟（微笑）很不安全
	* 比如：中传教务
	  
	![Image text](https://github.com/Zhaojytt/ns/blob/master/2016-2/zjy/img_folder/1.1.png)

* 短信验证码
	* 输入短信内的验证码完成验证
	* 更多的详见慢慢谈系列
	* 比如：美团外卖
		
	![Image text](https://github.com/Zhaojytt/ns/blob/master/2016-2/zjy/img_folder/1.2.png)
	
* 语音验证码，编辑指定短信内容发送到指定号码，电话回拨等
	* 详见慢慢谈系列

### 第二代 知识型验证码

第二代验证码是基于第一代验证码的核心思想（通过人类知识可以解答，而计算机难以解答的问题进行人机判断）而产生的创新的交互优化型验证码。第二代验证码基于第一代验证码的核心原理——“人机之间知识的差异”，拓展出大量创新型验证码。比如典型的四则运算验证码、图标点击式验证码。

* 四则运算图形验证码
	* 用户通过四则运算计算出正确的值后输入验证
	* 特点：此种方式与第一代图形验证码相比，增加了基于人类知识的方式，只要用户有一点数学知识基础，都可以轻松的完成图形验证码的验证
	* 安全性分析：增加了机器识别的难度，但是随着计算机图像识别技术的提高，这种方式也很容易破解，攻击者只需要在图像识别的基础上引入一个四则运算算法就可以。目前，针对这类验证码的破解也已经非常成熟
	
	![Image text](https://github.com/Zhaojytt/ns/blob/master/2016-2/zjy/img_folder/1.3.png)

* 图标选择点击式验证码
	* 通过让用户选择同类物品、动物图片进行验证。
	* 特点：安全性强、体验好。
	* 安全性分析:图像的智能识别领域目前虽然发展迅速，但是在面对稍加处理过的图片时仍表现不好，而且技术门槛高，仅掌握在部分大型机构手中，对于验证码领域产生不了足够的威胁，所以只要能够实现频繁的更换图库，就可以保障系统的安全性。
	* 比如：12306，还有reCaptcha再次验证时
	![Image text](https://github.com/Zhaojytt/ns/blob/master/2016-2/zjy/img_folder/1.4.png)

### 第三代 无知识型验证码

第三代验证码最大的特点是不再基于知识进行人机判断，而是基于人类固有的生物特征以及操作的环境信息综合决策，来判断是人类还是机器。无知识型验证码最大特点即无需人类思考，从而不会打断用户操作，进而提供更好的用户体验。如:图文点击式、滑动拼合式、拖动拼合式、拖动旋转式等。（还有刚刚探究过的google的“No Captcha reCaptcha")

* 优点
无知识型验证码有三大核心优点，分别是**用户体验，风险识别，风险拦截**。
	* 用户体验：
	无知识型验证码针对大多数的用户能够无需思考，直接通过。不存在业务和流程的打断，体验流畅，对用户体验的提升毋庸质疑。
	
	* 风险识别：
	因为随着机器学习的发展让机器掌握人类具有的知识也不再是难点，无知识型验证码不再基于知识来挑战机器，而是基于人类的固有行为特征以及操作的环境信息综合进行风控决策，攻击者难以批量的模拟出可以欺骗风控引擎的正常人类的的操作。

	* 风险拦截：
	普通的验证码基于知识对机器发起挑战，无法做到对机器进行阻断。因为知识的挑战还需要兼顾人类的体验，机器通过的概率只能做到无限的降低而无法消除。而无知识型验证码基于后端的风控决策，可以对不同风险的操作提出更高难度的验证码乃至阻断，有更大空间对风险进行消除和拦截。
	
* 图文点击式
	* 通过文字提醒用户点击图中相同字的位置进行验证
	* 特点：安全性较好且验证效率很高
	* 比如我在luosimao官网找到的
	* 安全性分析：此种方式点触的图片仅使用一次就会完全删除，所以不存在对比曾将的出现过的图片方式来进行破解，只能通过对图片中的文字位置与内容进行识别的方式进行破解。

	![Image text](https://github.com/Zhaojytt/ns/blob/master/2016-2/zjy/img_folder/1.5.png)
* 滑动拼合式
	* 按照要求将备选碎片滑动到正确的位置
	* 安全性分析：该方式主要是通过在X轴固定滑动到底端或者某一特定的位置，属于单一维度。使用按键精灵之类直接模拟，或者破解前端js加密就可以绕过。现在网上有比较成熟的破解方式。
	* 比如我在geetest官网体验
	
	![Image text](https://github.com/Zhaojytt/ns/blob/master/2016-2/zjy/img_folder/1.6.png)

* 拖动拼合式
	* 按照要求将备选碎片拖动到正确的位置
	* 安全性分析：该方式将某一物体拖动到某一位置，是多维的。同时以设备指纹和用户行为为依托，在用户进来页面时已经对用户的安全度有了比较精准的判定。一般此类验证码都会对相对移动的边缘做一些模糊或扭曲处理，对于用户来说只是一些正常的阴影效果，但对于攻击者则提高了匹配的难度。
	* 比如我在点触官网尝试的
		
	![Image text](https://github.com/Zhaojytt/ns/blob/master/2016-2/zjy/img_folder/1.7.png)

* 拖动旋转式
	* 通过拖动旋转，使图片完全吻合。
	* 安全性分析：该方式将某一物体旋转到某一位置吻合，对相对移动的边缘做一些模糊或扭曲处理，提高了匹配的难度。此种方式的安全性要比拖动拼合式安全一些。

* 组合式验证码
	* 先进行拖动式验证，如果有行为异常再进行图文点击验证
	* 特点：操作简单既考虑到了易用性，又考虑到了安全性
	* 安全性分析：这种组合的方式与采用单一的验证方式相比，安全性更高。这种方式通过两种验证方式增加了攻击者破解的难度和破解需要的时间成本。
	* 比如淘宝采用了滑动验证降低安全强度，提高用户体验，如有异常则增加图文点击验证


### 第四代 智能验证码
* 智能验证码最大的特点就是在继承安全性的基础上，采用“去验证化”方法提升用户体验。用户通过点击验证按钮，智能评定当前用户的安全状况，行为正常的用户省去验证环节直接 “免验证通过”，异常用户则进行强制性验证。在不降低无知识型验证码安全性的基础上，以最简单有效的方式完成验证。
* 安全性分析：智能验证码的安全性是在无知识型验证码的基础上，采用行为识别、设备指纹、风控引擎和大数据应用等技术，能够做到区分人与机器、人与人、设备与设备，安全性相对更高一些。
* 比如支付宝的人脸识别等等

![Image text](https://github.com/Zhaojytt/ns/blob/master/2016-2/zjy/img_folder/1.9.png)
![Image text](https://github.com/Zhaojytt/ns/blob/master/2016-2/zjy/img_folder/1.8.jpg)

## 总结
已经存在的众多安全验证码解决方案中，相对而言能够真的经受住考验的也就只有12306采用的图标选择式验证码，通过足够大的图片库以及图片库的持续更新，这种验证码可以很好的防御图形验证码破解的问题，在保证安全的前提下，智能验证码增加“去验证化”的用户体验，在用户验证之前，后端先行判断用户安全状况，仅对异常用户在前端进行验证。此方法既保证了安全性，又提升了用户体验，比目前淘宝采用的两种组合验证方式更加简单、有效。



### 学习参考
[https://www.touclick.com/online](url)

[http://www.geetest.com/exp_normal](url)

[https://www.zhihu.com/question/24173904](url)

[https://captcha.luosimao.com/demo/](url)

[http://wenku.baidu.com/view/02b0512cb9f3f90f77c61baf.html](url)

[https://yq.aliyun.com/articles/62607?spm=5176.100240.searchblog.7.SPYpJQ](url)
